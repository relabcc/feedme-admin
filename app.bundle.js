webpackJsonp([0],{0:function(e,exports,t){t(1),e.exports=t(298)},298:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t(299),t(303),t(305);var a=t(307),l=i(a),n=t(525),r=i(n);(0,r.default)(function(e){window.location.hash&&"#/"!==window.location.hash||(window.location.hash="/dashboard"),(0,l.default)(e.map(function(e){return e.name}))})},305:function(e,exports,t){var i=t(306);"string"==typeof i&&(i=[[e.id,i,""]]);t(302)(i,{});i.locals&&(e.exports=i.locals)},306:function(e,exports,t){exports=e.exports=t(301)(),exports.push([e.id,'.custom-input{margin-bottom:1em}.embed-container{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%}.embed-container embed,.embed-container iframe,.embed-container object{position:absolute;top:0;left:0;width:100%;height:100%}.uib-timepicker input{padding-right:1em!important}.photo-edit,.photo-view{position:relative;width:100%;height:0;margin-bottom:1em;padding-bottom:68%;overflow:hidden;display:block}.photo-edit img,.photo-view img{max-width:100%}img.img-preview{max-width:100%;background:url(/bg-blank.png)}.img-preview-area{margin-top:15px}.photo-name{margin:.5em 0 2em}.photo-edit:hover .overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,0,0,.3)}.photo-edit:hover .overlay:after{content:"[x]";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2em;color:#fff}#row-photos>.ng-admin-field-photos>ma-embedded-list-field>.row>.col-sm-12>.form-group{display:none}.form-horizontal .duplicate_button_container{position:absolute;right:-2em;z-index:2}@media (max-width:992px){.form-horizontal .duplicate_button_container{position:relative;right:0;display:block;text-align:right}}.angular-google-map-container{height:300px}#show-view .label-default{line-height:2}',""])},307:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=n.default.module("app",["ng-admin","youtube-embed","uiGmapgoogle-maps"]).config(["NgAdminConfigurationProvider",function(t){var i=t.application("Feedme Admin").baseApiUrl(d.API_ROOT),a={};(0,r.forEach)(o.entities,function(l,n){var r=l(t,e);a[n]=r,i.addEntity(r)});var l=t.menu();e.some(function(e){return"admin"===e||"editor"===e})&&l.addChild(t.menu().template('\n          <a href="#/search">\n            <span class="glyphicon glyphicon-search"></span>\n            搜尋餐廳\n          </a>'));var n=function i(l,n){var d=void 0;if((0,r.isObject)(l)){if((0,r.intersection)(l.role,e).length){var s=l.entities;(0,r.isArray)(s)?(d=t.menu(),(0,r.isArray)(s[0])||d.title(s[0]),s.forEach(function(e){i(e,d)})):d=t.menu(a[s]).title(o.entityNames[s]),n.addChild(d)}}else(0,r.isArray)(l)?(d=t.menu(),(0,r.isArray)(l[0])||d.title(l[0]),l.forEach(function(e){i(e,d)})):d=t.menu(a[l]).title(o.entityNames[l]),n.addChild(d)};o.menu.forEach(function(e){n(e,l)}),l.addChild(t.menu().template('\n        <a href="/logout.html">\n          <span class="glyphicon glyphicon-log-out"></span>\n          Logout\n        </a>')),i.menu(l),i.dashboard((0,m.default)(t)),t.configure(i)}]).config(["RestangularProvider",function(e){e.setErrorInterceptor(function(e){return 401!==e.status||((0,s.redirectToLogin)(),!1)}),e.addResponseInterceptor(v.default.response),e.addFullRequestInterceptor(v.default.request),e.setDefaultHeaders({Authorization:"Bearer "+window.localStorage.getItem("feedme_admin_token")})}]).config(["$stateProvider",function(e){e.state("restaurant-search",{parent:"ng-admin",url:"/search",controller:g.searchController,controllerAs:"controller",template:g.searchControllerTemplate})}]);(0,r.forEach)(f.default,function(e,i){t.directive(i,e)}),t.config(["$numeraljsConfigProvider",function(e){var t={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十億",trillion:"兆"},ordinal:function(){return"."},currency:{symbol:"¥"}};e.setLanguage("jp",t),e.setCurrentLanguage("jp")}]),n.default.element(document).ready(function(){n.default.bootstrap(document.getElementById("view"),["app"])})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var l=t(308),n=i(l);t(310),t(517),t(519),t(523);var r=t(380),d=t(524),s=t(525),o=t(527),u=t(729),f=i(u),c=t(914),m=i(c),p=t(915),v=i(p),g=t(921)},360:function(e,exports){},524:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=exports.API_ROOT="http://api.feedme.relab.cc/";exports.WEEK_DAYS=[{value:0,label:"星期天"},{value:1,label:"星期一"},{value:2,label:"星期二"},{value:3,label:"星期三"},{value:4,label:"星期四"},{value:5,label:"星期五"},{value:6,label:"星期六"}];exports.default=i},525:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateToken=exports.redirectToLogin=void 0,exports.default=function(e){var t=a()||window.localStorage.getItem("feedme_admin_token");t?r(t,e):l()},t(526);var i=t(524),a=function(){var e=location.search.substr(1),t=void 0;return e.split("&").forEach(function(e){var i=e.split("=");return"token"!==i[0]||(t=decodeURIComponent(i[1]),!1)}),t},l=exports.redirectToLogin=function(){window.localStorage.removeItem("feedme_admin_token"),window.location.href="./login.html"},n=function(e,t){document.getElementById("view").style.display="none",fetch(i.API_ROOT+"auth/refresh",{headers:{"x-refresh-token":e}}).then(function(e){return e.json()}).then(function(e){e.token?(window.localStorage.setItem("feedme_admin_token",e.token),window.roles=e.roles,t&&t(e.roles),window.location.reload()):l()})},r=exports.validateToken=function(e,t){fetch(i.API_ROOT+"auth/validate_token",{headers:{Authorization:"Bearer "+e}}).then(function(e){return e.json()}).then(function(i){"success"===i.status?(window.roles=i.roles,t&&t(i.roles)):500===i.status_code?n(e,t):l()}).catch(function(e){console.log("parsing failed",e)})}},527:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.menu=exports.entityNames=exports.entities=void 0;var a=t(528),l=i(a),n=t(644),r=i(n),d=t(646),s=i(d),o=t(647),u=i(o),f=t(648),c=i(f),m=t(649),p=i(m),v=t(650),g=i(v),y=t(651),h=i(y),b=t(652),_=i(b),w=t(653),j=i(w),F=t(654),k=i(F),E=t(655),q=i(E),M=t(656),V=i(M),P=t(657),O=i(P),x=t(658),N=i(x),I=t(713),L=i(I),D=t(714),C=i(D),R=t(715),T=i(R),z=t(716),A=i(z),S=t(717),B=i(S),H=t(718),U=i(H),Y=t(719),W=i(Y),K=t(720),J=i(K),X=t(721),G=i(X),Q=t(722),Z=i(Q),ee=t(723),te=i(ee),ie=t(724),ae=i(ie),le=t(725),ne=i(le),re=t(726),de=i(re),se=t(727),oe=i(se),ue=t(728),fe=i(ue),ce={restaurants:l.default,regions:r.default,districts:s.default,categories:u.default,subcategories:c.default,atmospheres:j.default,demands:k.default,users:g.default,roles:h.default,permissions:_.default,hours:q.default,restaurantPhotos:p.default,populations:V.default,choices:O.default,themes:N.default,recommends:L.default,travels:C.default,cities:B.default,pages:U.default,abouts:W.default,aboutContents:J.default,travelPhotos:T.default,choicePhotos:A.default,mores:G.default,comments:Z.default,tastes:te.default,notify:ae.default,footer:ne.default,introSlides:oe.default,locales:de.default,watermarks:fe.default},me={restaurants:"餐廳",cities:"大區",regions:"分區",districts:"小地區",categories:"食物主分類",subcategories:"食物次分類",atmospheres:"餐廳氣氛",demands:"用餐需求",populations:"用餐人數",users:"使用者管理",roles:"角色管理",permissions:"權限管理",restaurantPhotos:"餐廳照片",hours:"營業時間",choices:"精選餐廳",themes:"主題推薦",recommends:"精選主題",travels:"行程推薦",pages:"頁面標題",abouts:"關於",aboutContents:"關於細項",mores:"更多按鈕",tastes:"口味選項",notify:"郵件通知",footer:"Footer",introSlides:"首頁輪播",locales:"語系管理",watermarks:"浮水印"},pe=[{role:["admin","editor"],entities:["restaurants","choices","themes","recommends"]},{role:["admin"],entities:["cities","regions","districts","travels"]},{role:["admin"],entities:["categories","subcategories"]},{role:["admin"],entities:["demands","atmospheres","populations"]},{role:["admin"],entities:["pages","introSlides","mores","abouts","footer","locales","watermarks"]},{role:["admin"],entities:["users","tastes","roles","permissions","notify"]}];exports.entities=ce,exports.entityNames=me,exports.menu=pe,exports.default=ce},528:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var i=t.includes("admin"),a=e.entity("restaurants"),l=e.entity("locales"),d=(0,u.default)(e,l);return a.listView().fields([e.field("id").detailLinkRoute("show"),e.field("name").isDetailLink(!0).detailLinkRoute("show"),e.field("address"),e.field("region.name"),e.field("district.name"),e.field("pageview","number"),e.field("active","boolean")]).actions(['<ma-create-button entry="entry" entity="entity" />','<export-excel-button entry="entry" entity="entity" />']),a.showView().fields([e.field("id"),e.field("name"),e.field("active","boolean"),e.field("intlDescription","embedded_list").targetFields(d.show),e.field("intlIntro","embedded_list").targetFields(d.show),e.field("rating"),e.field("scores","embedded_list").targetFields([e.field("name"),e.field("value","number")]),e.field("themes","reference_many").targetEntity(e.entity("themes")).targetField(e.field("name")).label(r.entityNames.themes),e.field("place_id"),e.field("address"),e.field("district.id","reference").targetEntity(e.entity("districts")).targetField(e.field("name")).label(r.entityNames.districts).detailLinkRoute("show"),e.field("lunchMin","number").format("$0,0").validation({required:!0}),e.field("lunchMax","number").format("$0,0").validation({required:!0}),e.field("dinnerMin","number").format("$0,0").validation({required:!0}),e.field("dinnerMax","number").format("$0,0").validation({required:!0}),e.field("credit_card","boolean").choices([{value:!0,label:"可刷卡"},{value:!1,label:"不可刷卡"}]),e.field("subcategories","reference_many").targetEntity(e.entity("subcategories")).targetField(e.field("name")).label(r.entityNames.subcategories),e.field("atmospheres","reference_many").targetEntity(e.entity("atmospheres")).targetField(e.field("name")).label(r.entityNames.atmospheres),e.field("populations","reference_many").targetEntity(e.entity("populations")).targetField(e.field("name")).label(r.entityNames.populations),e.field("demands","reference_many").targetEntity(e.entity("demands")).targetField(e.field("name")).label(r.entityNames.demands),e.field("cover").template('<photo-viewer value="::value" />'),e.field("video").template('<youtube-field video-id="::value" />'),e.field("envPhotos","embedded_list").targetFields([e.field("path").template('<photo-viewer value="::value" />'),e.field("intlDescription","embedded_list").targetFields(d.show)]),e.field("photos","embedded_list").targetFields([e.field("path").template('<photo-viewer value="::value" />'),e.field("name"),e.field("price"),e.field("intlDescription","embedded_list").targetFields(d.show)]),e.field("hours","embedded_list").targetFields([e.field("week","choice").choices(n.WEEK_DAYS).label("星期"),e.field("start","datetime").format("HH:mm").map(c),e.field("end","datetime").format("HH:mm").map(c)]).label(r.entityNames.hours),e.field("comments","referenced_list").targetEntity(e.entity("comments")).targetReferenceField("restaurant_id").targetFields([e.field("content"),e.field("user.name").label("By")]).listActions('<ma-delete-button entry="entry" entity="entity" size="xs"/>')]).actions(["edit","list",i&&"delete"]),a.listView().exportFields([e.field("id"),e.field("name"),e.field("active","boolean"),e.field("intlDescription","embedded_list").targetFields(d.export),e.field("intlIntro","embedded_list").targetFields(d.export),e.field("rating"),e.field("scores","embedded_list").targetFields([e.field("name"),e.field("value","number")]),e.field("themes","reference_many").targetEntity(e.entity("themes")).targetField(e.field("name")).label(r.entityNames.themes),e.field("place_id"),e.field("address"),e.field("district.id","reference").targetEntity(e.entity("districts")).targetField(e.field("name")).label(r.entityNames.districts).detailLinkRoute("show"),e.field("lunchMin","number").format("$0,0").validation({required:!0}),e.field("lunchMax","number").format("$0,0").validation({required:!0}),e.field("dinnerMin","number").format("$0,0").validation({required:!0}),e.field("dinnerMax","number").format("$0,0").validation({required:!0}),e.field("credit_card","boolean").choices([{value:!0,label:"可刷卡"},{value:!1,label:"不可刷卡"}]),e.field("subcategories","reference_many").targetEntity(e.entity("subcategories")).targetField(e.field("name")).label(r.entityNames.subcategories),e.field("atmospheres","reference_many").targetEntity(e.entity("atmospheres")).targetField(e.field("name")).label(r.entityNames.atmospheres),e.field("populations","reference_many").targetEntity(e.entity("populations")).targetField(e.field("name")).label(r.entityNames.populations),e.field("demands","reference_many").targetEntity(e.entity("demands")).targetField(e.field("name")).label(r.entityNames.demands)]),a.creationView().fields([e.field("name").validation({required:!0}),e.field("active","boolean").validation({required:!0}),d.placeholder,e.field("intlDescription","embedded_list").targetFields(d.edit).validation({required:!0}),e.field("intlIntro","embedded_list").targetFields(d.edit).validation({required:!0}),e.field("themes","reference_many").targetEntity(e.entity("themes")).targetField(e.field("name").map(s.default)).label(r.entityNames.themes),e.field("photo-upload").template('<base64-img name="cover" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Cover Upload").validation({required:!0}),e.field("video_url").template('<youtube-create-field field="::field" value="entry.values[field.name()]" entry="entry"></youtube-create-field>'),e.field("district_id","reference").targetEntity(e.entity("districts")).targetField(e.field("name").map(s.default)).label(r.entityNames.districts).validation({required:!0}),e.field("place_id").template('<place-id-field field="::field" value="entry.values[field.name()]" entry="entry"/>'),e.field("place_url").editable(!1).defaultValue(f),e.field("address").template('<addr-field field="::field" value="entry.values[field.name()]" entry="entry"></addr-field>').validation({required:!0}),e.field("category","reference").targetEntity(e.entity("categories")).targetField(e.field("name")).label(r.entityNames.categories).validation({required:!0}),e.field("subcategory_ids","reference_many").targetEntity(e.entity("subcategories")).targetField(e.field("name")).perPage(999).attributes({placeholder:"Select subcategory..."}).template('<subcategory-dropdown field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore" />').label(r.entityNames.subcategories).validation({required:!0}),e.field("lunchMin","number").format("$0,0").validation({required:!0}),e.field("lunchMax","number").format("$0,0").validation({required:!0}),e.field("dinnerMin","number").format("$0,0").validation({required:!0}),e.field("dinnerMax","number").format("$0,0").validation({required:!0}),e.field("credit_card","boolean").choices([{value:!0,label:"可刷卡"},{value:!1,label:"不可刷卡"}]).defaultValue(!1).validation({required:!0}),e.field("atmosphere_ids","reference_many").targetEntity(e.entity("atmospheres")).targetField(e.field("name")).label(r.entityNames.atmospheres).validation({required:!0}),e.field("population_ids","reference_many").targetEntity(e.entity("populations")).targetField(e.field("name")).label(r.entityNames.populations).validation({required:!0}),e.field("demand_ids","reference_many").targetEntity(e.entity("demands")).targetField(e.field("name")).label(r.entityNames.demands).validation({required:!0}),e.field("rating","number").validation({required:!0,pattern:"^[1-5]$"}),e.field("scores","embedded_list").targetFields([e.field("name").validation({required:!0}),e.field("value","number").validation({required:!0,pattern:"^[1-5]$"})]),e.field("hours","embedded_list").targetFields([e.field("week","choice").choices(n.WEEK_DAYS).label("星期"),e.field("start","datetime").format("HH:mm").template('<ma-time-field field="::field" value="value" />'),e.field("end","datetime").format("HH:mm").template('<ma-time-field field="::field" value="value" />')]).template('<open-time-field field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore" />').label(r.entityNames.hours)]),a.editionView().fields([e.field("name").validation({required:!0}),e.field("active","boolean").validation({required:!0}),d.placeholder,e.field("intlDescription","embedded_list").targetFields(d.edit).validation({required:!0}),e.field("intlIntro","embedded_list").targetFields(d.edit).validation({required:!0}),e.field("themes","reference_many").targetEntity(e.entity("themes")).targetField(e.field("name").map(s.default)).label(r.entityNames.themes),e.field("place_id").template('<place-id-field field="::field" value="entry.values[field.name()]" entry="entry"/>'),e.field("place_url").editable(!1).defaultValue(f),e.field("address").template('<addr-field field="::field" value="entry.values[field.name()]" entry="entry"></addr-field>').validation({required:!0}),e.field("district.id","reference").targetEntity(e.entity("districts")).targetField(e.field("name").map(s.default)).label(r.entityNames.districts).validation({required:!0}),e.field("lunchMin","number").format("$0,0").validation({required:!0}),e.field("lunchMax","number").format("$0,0").validation({required:!0}),e.field("dinnerMin","number").format("$0,0").validation({required:!0}),e.field("dinnerMax","number").format("$0,0").validation({required:!0}),e.field("credit_card","boolean").choices([{value:!0,label:"可刷卡"},{value:!1,label:"不可刷卡"}]).validation({required:!0}),e.field("category","reference").targetEntity(e.entity("categories")).targetField(e.field("name")).label(r.entityNames.categories),e.field("subcategories","reference_many").targetEntity(e.entity("subcategories")).targetField(e.field("name")).perPage(999).template('<subcategory-dropdown field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore" />').label(r.entityNames.subcategories).validation({required:!0}),e.field("atmospheres","reference_many").targetEntity(e.entity("atmospheres")).targetField(e.field("name")).label(r.entityNames.atmospheres).validation({required:!0}),e.field("populations","reference_many").targetEntity(e.entity("populations")).targetField(e.field("name")).label(r.entityNames.populations).validation({required:!0}),e.field("demands","reference_many").targetEntity(e.entity("demands")).targetField(e.field("name")).label(r.entityNames.demands).validation({required:!0}),e.field("rating","number").validation({required:!0,pattern:"^[1-5]$"}),e.field("scores","embedded_list").targetFields([e.field("name").validation({required:!0}),e.field("value","number").validation({required:!0,pattern:"^[1-5]$"})]),e.field("cover-upload").template('<base64-img name="cover" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Cover Upload").validation({required:!0}),e.field("video").template('<youtube-edit-field field="::field" value="entry.values[field.name()]" entry="entry"></youtube-edit-field>'),e.field("envPhotos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<photo-viewer value="::value" />'),e.field("intlDescription","embedded_list").targetFields(d.edit),e.field("order")]).template('<ma-custom-embed field="::field" value="entry.values[field.name()]" datastore="::datastore" />'),e.field("file2","file").label("Add New Env Photo").uploadInformation({url:"",apifilename:"path",method:"POST",multiple:!0,headers:{Authorization:"Bearer "+window.localStorage.getItem("feedme_admin_token")}}).template('<photo-edit-field linked="envPhotos" url="restaurants/{id}/env_photos" field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore"></photo-edit-field>'),e.field("photos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<photo-viewer value="::value" />'),e.field("name"),e.field("price","number"),e.field("intlDescription","embedded_list").targetFields(d.edit),e.field("order")]).template('<ma-custom-embed field="::field" value="entry.values[field.name()]" datastore="::datastore" />'),e.field("file","file").label("Add New Photo").uploadInformation({url:"",apifilename:"path",method:"POST",multiple:!0,headers:{Authorization:"Bearer "+window.localStorage.getItem("feedme_admin_token")}}).template('<photo-edit-field linked="photos" url="restaurants/{id}/restaurant_photos" field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore"></photo-edit-field>'),e.field("hours","embedded_list").targetFields([e.field("id").editable(!1),e.field("week","choice").choices(n.WEEK_DAYS).label("星期"),e.field("start","datetime").template('<ma-time-field field="::field" value="value" />'),e.field("end","datetime").template('<ma-time-field field="::field" value="value" />')]).template('<open-time-field field="::field" value="entry.values[field.name()]" entry="entry" datastore="::datastore" />').label(r.entityNames.hours)]).actions(["list",i&&"delete"]),a.deletionView(),a};var a=t(529),l=i(a),n=t(524),r=t(527),d=t(642),s=i(d),o=t(643),u=i(o),f="https://developers.google.com/places/place-id",c=function(e){var t=(0,l.default)(e).tz("Asia/Tokyo").format("YYYY-MM-DD HH:mm:ss");return new Date(t)}},532:function(e,exports,t){function i(e){return t(a(e))}function a(e){return l[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var l={"./af":533,"./af.js":533,"./ar":534,"./ar-dz":535,"./ar-dz.js":535,"./ar-ly":536,"./ar-ly.js":536,"./ar-ma":537,"./ar-ma.js":537,"./ar-sa":538,"./ar-sa.js":538,"./ar-tn":539,"./ar-tn.js":539,"./ar.js":534,"./az":540,"./az.js":540,"./be":541,"./be.js":541,"./bg":542,"./bg.js":542,"./bn":543,"./bn.js":543,"./bo":544,"./bo.js":544,"./br":545,"./br.js":545,"./bs":546,"./bs.js":546,"./ca":547,"./ca.js":547,"./cs":548,"./cs.js":548,"./cv":549,"./cv.js":549,"./cy":550,"./cy.js":550,"./da":551,"./da.js":551,"./de":552,"./de-at":553,"./de-at.js":553,"./de.js":552,"./dv":554,"./dv.js":554,"./el":555,"./el.js":555,"./en-au":556,"./en-au.js":556,"./en-ca":557,"./en-ca.js":557,"./en-gb":558,"./en-gb.js":558,"./en-ie":559,"./en-ie.js":559,"./en-nz":560,"./en-nz.js":560,"./eo":561,"./eo.js":561,"./es":562,"./es-do":563,"./es-do.js":563,"./es.js":562,"./et":564,"./et.js":564,"./eu":565,"./eu.js":565,"./fa":566,"./fa.js":566,"./fi":567,"./fi.js":567,"./fo":568,"./fo.js":568,"./fr":569,"./fr-ca":570,"./fr-ca.js":570,"./fr-ch":571,"./fr-ch.js":571,"./fr.js":569,"./fy":572,"./fy.js":572,"./gd":573,"./gd.js":573,"./gl":574,"./gl.js":574,"./he":575,"./he.js":575,"./hi":576,"./hi.js":576,"./hr":577,"./hr.js":577,"./hu":578,"./hu.js":578,"./hy-am":579,"./hy-am.js":579,"./id":580,"./id.js":580,"./is":581,"./is.js":581,"./it":582,"./it.js":582,"./ja":583,"./ja.js":583,"./jv":584,"./jv.js":584,"./ka":585,"./ka.js":585,"./kk":586,"./kk.js":586,"./km":587,"./km.js":587,"./ko":588,"./ko.js":588,"./ky":589,"./ky.js":589,"./lb":590,"./lb.js":590,"./lo":591,"./lo.js":591,"./lt":592,"./lt.js":592,"./lv":593,"./lv.js":593,"./me":594,"./me.js":594,"./mi":595,"./mi.js":595,"./mk":596,"./mk.js":596,"./ml":597,"./ml.js":597,"./mr":598,"./mr.js":598,"./ms":599,"./ms-my":600,"./ms-my.js":600,"./ms.js":599,"./my":601,"./my.js":601,"./nb":602,"./nb.js":602,"./ne":603,"./ne.js":603,"./nl":604,"./nl-be":605,"./nl-be.js":605,"./nl.js":604,"./nn":606,"./nn.js":606,"./pa-in":607,"./pa-in.js":607,"./pl":608,"./pl.js":608,"./pt":609,"./pt-br":610,"./pt-br.js":610,"./pt.js":609,"./ro":611,"./ro.js":611,"./ru":612,"./ru.js":612,"./se":613,"./se.js":613,"./si":614,"./si.js":614,"./sk":615,"./sk.js":615,"./sl":616,"./sl.js":616,"./sq":617,"./sq.js":617,"./sr":618,"./sr-cyrl":619,"./sr-cyrl.js":619,"./sr.js":618,"./ss":620,"./ss.js":620,"./sv":621,"./sv.js":621,"./sw":622,"./sw.js":622,"./ta":623,"./ta.js":623,"./te":624,"./te.js":624,"./tet":625,"./tet.js":625,"./th":626,"./th.js":626,"./tl-ph":627,"./tl-ph.js":627,"./tlh":628,"./tlh.js":628,"./tr":629,"./tr.js":629,"./tzl":630,"./tzl.js":630,"./tzm":631,"./tzm-latn":632,"./tzm-latn.js":632,"./tzm.js":631,"./uk":633,"./uk.js":633,"./uz":634,"./uz.js":634,"./vi":635,"./vi.js":635,"./x-pseudo":636,"./x-pseudo.js":636,"./yo":637,"./yo.js":637,"./zh-cn":638,"./zh-cn.js":638,"./zh-hk":639,"./zh-hk.js":639,"./zh-tw":640,"./zh-tw.js":640};i.keys=function(){return Object.keys(l)},i.resolve=a,e.exports=i,i.id=532},642:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t.id+": "+t.name}},643:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(e){return e.replace(/(?:\r\n|\r|\n)/g,"|")};exports.default=function(e,i){return{show:[e.field("locale"),e.field("text")],export:[e.field("locale"),e.field("text").map(t)],edit:[e.field("locale_id","reference").targetEntity(i).targetField(e.field("code")).label("Locale"),e.field("text","text")],placeholder:e.field("_locales","reference").targetEntity(i).targetField(e.field("code")).editable(!1).label("").validation({required:!1})}}},644:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("regions"),i=e.entity("locales"),a=(0,r.default)(e,i);return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("intlName","embedded_list").targetFields(a.show),e.field("city.intlName","embedded_list").targetFields(a.show).label("大區")]),t.showView().fields([e.field("id"),a.placeholder,e.field("intlName","embedded_list").targetFields(a.show),e.field("districts","reference_many").targetEntity(e.entity("districts")).targetField(e.field("intlName").map(l.default)).detailLinkRoute("show")]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("city_id","reference").targetEntity(e.entity("cities")).targetField(e.field("intlName").map(l.default)).label("City").validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t};var a=t(645),l=i(a),n=t(643),r=i(n)},645:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){return t.id+": "+e[0].text}},646:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("districts"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("intlName","embedded_list").targetFields(a.show),e.field("nameJP"),e.field("region.intlName","embedded_list").targetFields(a.show)]),t.showView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show),e.field("nameJP"),e.field("type"),e.field("region.id","reference").targetEntity(e.entity("regions")).targetField(e.field("intlName").map(r.default)).detailLinkRoute("show").label("Region"),e.field("restaurant_ids","reference_many").targetEntity(e.entity("restaurants")).targetField(e.field("intlName").map(r.default)).perPage(999).label("Restaurants"),e.field("photo").template('<photo-viewer value="::value" />')]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("nameJP").validation({required:!0}),e.field("type"),e.field("region_id","reference").targetEntity(e.entity("regions")).targetField(e.field("intlName").map(r.default)).label("Region").validation({required:!0}),e.field("center").template('<location-field field="::field" value="entry.values[field.name()]" entry="entry"/>'),e.field("photo-upload").template('<base64-img field="::field" value="entry.values[field.name()]" entry="entry" />').label("Photo Upload").validation({required:!0})]),t.editionView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("nameJP").validation({required:!0}),e.field("type"),e.field("region_id","reference").targetEntity(e.entity("regions")).targetField(e.field("intlName").map(r.default)).label("Region").validation({required:!0}),e.field("center").template('<location-field field="::field" value="entry.values[field.name()]" entry="entry"/>'),e.field("photo-upload").template('<base64-img field="::field" value="entry.values[field.name()]" entry="entry" />').label("Photo Upload").validation({required:!0})]),t};var a=t(643),l=i(a),n=t(645),r=i(n)},647:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("categories"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show),e.field("order")]).actions(['<ma-create-button entry="entry" entity="entity" />','<export-excel-button entry="entry" entity="entity" />']),t.showView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show),e.field("order"),e.field("subcategories","reference_many").targetEntity(e.entity("subcategories")).targetField(e.field("name").map(r.default))]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("order","number")]),t.editionView().fields(t.creationView().fields()),t};var a=t(643),l=i(a),n=t(645),r=i(n)},648:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("subcategories"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show),e.field("category","reference").targetEntity(e.entity("categories")).perPage(999).targetField(e.field("intlName","embedded_list").targetFields(a.show))]).actions(['<ma-create-button entry="entry" entity="entity" />','<export-excel-button entry="entry" entity="entity" />']),t.showView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show),e.field("category","reference").targetEntity(e.entity("categories")).perPage(999).targetField(e.field("intlName","embedded_list").targetFields(a.show)).detailLinkRoute("show").isDetailLink(!0)]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("category_id","reference").targetEntity(e.entity("categories")).perPage(999).targetField(e.field("intlName").map(r.default)).label("Category").validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t};var a=t(643),l=i(a),n=t(645),r=i(n)},649:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("restaurant_photos");return t.deletionView(),t}},650:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("users");return t.listView().fields([e.field("id"),e.field("name").isDetailLink(!0),e.field("email").isDetailLink(!0),e.field("roles","reference_many").targetEntity(e.entity("roles")).targetField(e.field("name"))]),t.showView().fields([e.field("id"),e.field("email"),e.field("name"),e.field("roles","reference_many").targetEntity(e.entity("roles")).targetField(e.field("name"))]),t.creationView().fields([e.field("name").validation({required:!0}),e.field("email","email").validation({required:!0}),e.field("password","password").validation({required:!0}),e.field("password_confirm","password").validation({required:!0,validator:function(e,t){if(e!==t.password)throw new Error("Password does not match!")}}),e.field("roles","reference_many").targetEntity(e.entity("roles")).targetField(e.field("name")).validation({
required:!0})]),t.editionView().fields([e.field("roles","reference_many").targetEntity(e.entity("roles")).targetField(e.field("name")).validation({required:!0})]),t}},651:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("roles");return t.listView().fields([e.field("id"),e.field("display_name").isDetailLink(!0),e.field("description")]),t.showView().fields([e.field("id"),e.field("name"),e.field("display_name"),e.field("description"),e.field("permissions","reference_many").targetEntity(e.entity("permissions")).targetField(e.field("name"))]),t.creationView().fields([e.field("name").validation({required:!0}),e.field("display_name").validation({required:!0}),e.field("description").validation({required:!0}),e.field("permissions","reference_many").targetEntity(e.entity("permissions")).targetField(e.field("name")).validation({required:!0})]),t.editionView().fields([e.field("description").validation({required:!0}),e.field("permissions","reference_many").targetEntity(e.entity("permissions")).targetField(e.field("name")).validation({required:!0})]),t}},652:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("permissions");return t.listView().fields([e.field("id"),e.field("display_name").isDetailLink(!0),e.field("description")]),t.showView().fields([e.field("id"),e.field("name"),e.field("display_name"),e.field("description")]),t.creationView().fields([e.field("name").validation({required:!0}),e.field("display_name").validation({required:!0}),e.field("description").validation({required:!0})]),t.editionView().fields([e.field("description").validation({required:!0})]),t}},653:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("atmospheres"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show)]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.editionView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.deletionView(),t};var a=t(643),l=i(a)},654:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("demands"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show)]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.editionView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.deletionView(),t};var a=t(643),l=i(a)},655:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("hours");return t.deletionView(),t}},656:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("populations"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(a.show)]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.editionView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.deletionView(),t};var a=t(643),l=i(a)},657:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("choices");return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("restaurant.name")]),t.showView().fields([e.field("id"),e.field("restaurant.id","reference").targetEntity(e.entity("restaurants")).targetField(e.field("name").map(l.default)).label("Name").validation({required:!0}),e.field("photos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<travel-photo-viewer value="::value" />'),e.field("content","text")])]),t.creationView().fields([e.field("restaurant_id","reference").targetEntity(e.entity("restaurants")).targetField(e.field("name").map(l.default)).perPage(9999).validation({required:!0})]),t.editionView().fields([e.field("restaurant.id").editable(!1),e.field("restaurant.name").editable(!1),e.field("photos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<travel-photo-viewer value="::value" />'),e.field("content","text")]).template('<ma-custom-embed field="::field" value="entry.values[field.name()]" />'),e.field("file","file").label("Add New Photos").uploadInformation({url:"",apifilename:"path",method:"POST",multiple:!0,headers:{Authorization:"Bearer "+window.localStorage.getItem("feedme_admin_token")}}).template('<photo-edit-field url="choices/{id}/photos" field="::field" linked="photos" value="entry.values[field.name()]" entry="entry"></photo-edit-field>')]),t};var a=t(642),l=i(a)},658:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(659),l=i(a);exports.default=function(e,t){var i=t.includes("admin"),a=e.entity("restaurants"),n=e.entity("locales"),d=e.entity("themes"),o=(0,s.default)(e,n);return d.listView().fields([e.field("id"),e.field("intlName","embedded_list").targetFields(o.show),e.field("pageview","number"),e.field("state","boolean")]).actions(['<ma-create-button entry="entry" entity="entity" />','<export-excel-button entry="entry" entity="entity" />','<a class="btn btn-default" href="//f.feed-me.me/export/theme_restaurant.csv" target="_blank">\n        <span class="glyphicon glyphicon-download" aria-hidden="true"></span>&nbsp;<span class="hidden-xs ng-scope">Export Restaurants</span>\n    </a>']),d.showView().fields([e.field("intlName","embedded_list").targetFields(o.show),e.field("state","boolean"),e.field("intlDescription","embedded_list").targetFields(o.show),e.field("recommend","boolean").label("精選"),e.field("restaurants","embedded_list").targetEntity(a).targetFields([e.field("id"),e.field("name"),e.field("intlThemeIntro","embedded_list").targetFields(o.show)]),e.field("cover").template('<photo-viewer value="::value" />')]).actions(["edit","list",i&&"delete"]),d.creationView().fields([o.placeholder,e.field("intlName","embedded_list").targetFields(o.edit).validation({required:!0}),e.field("intlDescription","embedded_list").targetFields(o.edit).validation({required:!0}),e.field("recommend","boolean").label("精選").choices([{value:!0,label:"精選"},{value:!1,label:"無"}]).defaultValue(!1),e.field("state","boolean").label("上架中").choices([{value:!0,label:"上架中"},{value:!1,label:"下架"}]).defaultValue(!0).validation({required:!0}),e.field("restaurants","embedded_list").targetFields([e.field("id","reference").targetEntity(a).perPage(9999).targetField(e.field("name")),e.field("intlThemeIntro","embedded_list").targetFields(o.edit)]).validation({required:!0}),e.field("_ids","reference").targetEntity(a).perPage(9999).targetField(e.field("name").map(r.default)).editable(!1).label("").validation({required:!1}),e.field("photo-upload").template('<base64-img name="cover" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Cover Upload").validation({required:!0})]),d.editionView().fields([].concat((0,l.default)(d.creationView().fields()),[e.field("state","boolean").choices([{value:!0,label:"上架中"},{value:!1,label:"下架"}]).label("上架中")])).actions(["list",i&&"delete"]),d};var n=t(642),r=i(n),d=t(643),s=i(d)},713:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("recommends");return t.listView().fields([e.field("id"),e.field("themeId","reference").targetEntity(e.entity("themes")).targetField(e.field("name")).detailLinkRoute("show"),e.field("pageview","number"),e.field("state","boolean")]),t.creationView().fields([e.field("themeId","reference").targetEntity(e.entity("themes")).targetField(e.field("name").map(l.default)).validation({required:!0})]),t.deletionView(),t};var a=t(642),l=i(a)},714:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("travels");return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("name").isDetailLink(!0).detailLinkRoute("show"),e.field("district.name"),e.field("pageview","number")]),t.showView().fields([e.field("id"),e.field("name"),e.field("cover").template('<photo-viewer value="::value" />'),e.field("content"),e.field("photos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<travel-photo-viewer value="::value" />'),e.field("content","text")])]),t.creationView().fields([e.field("name").validation({required:!0}),e.field("district_id","reference").targetEntity(e.entity("districts")).targetField(e.field("name").map(l.default)).label("Districts").validation({required:!0}),e.field("photo-upload").template('<base64-img name="cover" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Cover Upload").validation({required:!0})]),t.editionView().fields([e.field("name").validation({required:!0}),e.field("district.id","reference").targetEntity(e.entity("districts")).targetField(e.field("name").map(l.default)).label("Districts").validation({required:!0}),e.field("cover").template('<base64-img name="cover" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Photo Upload").validation({required:!0}),e.field("content","text"),e.field("photos","embedded_list").targetFields([e.field("id").editable(!1),e.field("path").template('<travel-photo-viewer value="::value" />'),e.field("content","text")]).template('<ma-custom-embed field="::field" value="entry.values[field.name()]" />'),e.field("file","file").label("Add New Photos").uploadInformation({url:"",apifilename:"path",method:"POST",multiple:!0,headers:{Authorization:"Bearer "+window.localStorage.getItem("feedme_admin_token")}}).template('<photo-edit-field url="travels/{id}/photos" field="::field" value="entry.values[field.name()]" entry="entry"></photo-edit-field>')]),t};var a=t(642),l=i(a)},715:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("travel_photos");return t.deletionView(),t}},716:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("choice_photos");return t.deletionView(),t}},717:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("cities"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("intlName","embedded_list").targetFields(a.show)]),t.showView().fields([e.field("id"),a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("regions","reference_many").targetEntity(e.entity("regions")).targetField(e.field("intlName").map(r.default)).detailLinkRoute("show")]),t.creationView().fields([a.placeholder,e.field("intlName","embedded_list").targetFields(a.edit).validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t};var a=t(643),l=i(a),n=t(645),r=i(n)},718:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("locales"),i=(0,l.default)(e,t),a=e.entity("pages");return a.listView().fields([e.field("id"),e.field("intlTitle","embedded_list").targetFields(i.show)]),a.editionView().fields([i.placeholder,e.field("intlTitle","embedded_list").targetFields(i.edit).validation({required:!0}),e.field("intlSubtitle","embedded_list").targetFields(i.edit).validation({required:!0}),e.field("photo-upload").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0})]),a.deletionView(),a};var a=t(643),l=i(a)},719:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("abouts"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlTitle","embedded_list").targetFields(a.show)]),t.editionView().fields([a.placeholder,e.field("intlTitle","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("photo-upload-1").template('<base64-img name="logo" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Logo").validation({required:!0}),e.field("photo-upload-2").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0}),e.field("about_contents","embedded_list").targetFields([e.field("intlTitle","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("photo-upload").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0})])]),t.deletionView(),t};var a=t(643),l=i(a)},720:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("about_contents");return t.listView().fields([e.field("id"),e.field("title")]),t.editionView().fields([e.field("about_id","reference").targetEntity(e.entity("abouts")).targetField(e.field("title")).label("About").validation({required:!0}),e.field("title").validation({required:!0}),e.field("text","text").validation({required:!0}),e.field("photo-upload").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0})]),t.deletionView(),t}},721:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("mores"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("slug"),e.field("intlText","embedded_list").targetFields(a.show)]),t.editionView().fields([a.placeholder,e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("photo-upload").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0}),e.field("photo-upload").template('<base64-img name="icon" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Icon").validation({required:!0})]),t.deletionView(),t};var a=t(643),l=i(a)},722:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("comments");return t.listView().fields([e.field("id"),e.field("content"),e.field("user.name")]),t.deletionView(),t}},723:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("tastes"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("intlText","embedded_list").targetFields(a.show)]),t.showView().fields([e.field("id"),e.field("intlText","embedded_list").targetFields(a.show),e.field("color")]),t.creationView().fields([a.placeholder,e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("color")]),t.editionView().fields([a.placeholder,e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("color")]),t};var a=t(643),l=i(a)},724:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("notifies");return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("mail").isDetailLink(!0).detailLinkRoute("show")]),t.showView().fields([e.field("id"),e.field("mail")]),t.creationView().fields([e.field("mail").validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t}},725:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("footers"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("intlText","embedded_list").targetFields(a.show),e.field("link")]),t.showView().fields([e.field("id"),e.field("intlText","embedded_list").targetFields(a.show),e.field("link")]),t.editionView().fields(a.placeholder,e.field("intlText","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("link").validation({required:!0})),t};var a=t(643),l=i(a)},726:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("locales");return t.listView().fields([e.field("id").detailLinkRoute("show"),e.field("code")]),t.showView().fields([e.field("id"),e.field("code")]),t.creationView().fields([e.field("code").validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t}},727:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("slides"),i=e.entity("locales"),a=(0,l.default)(e,i);return t.listView().fields([e.field("id"),e.field("intlTitle","embedded_list").targetFields(a.show),e.field("intlSubtitle","embedded_list").targetFields(a.show),e.field("link")]),t.showView().fields([e.field("intlTitle","embedded_list").targetFields(a.show),e.field("intlSubtitle","embedded_list").targetFields(a.show),e.field("link"),e.field("image").template('<photo-viewer value="::value" />')]),t.creationView().fields([a.placeholder,e.field("intlTitle","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("intlSubtitle","embedded_list").targetFields(a.edit).validation({required:!0}),e.field("link").validation({required:!0}),e.field("photo-upload").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />').label("Image").validation({required:!0})]),t.editionView().fields(t.creationView().fields()),t.deletionView(),t};var a=t(643),l=i(a)},728:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.entity("watermarks");return t.listView().fields([e.field("id"),e.field("image").isDetailLink(!0)]),t.editionView().fields([e.field("image").template('<base64-img name="image" field="::field" value="entry.values[field.name()]" entry="entry" />'),e.field("example").template('<watermark-editor field="::field" entry="entry" />')]),t}},729:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(730),l=i(a),n=t(740),r=i(n),d=t(742),s=i(d),o=t(743),u=i(o),f=t(744),c=i(f),m=t(746),p=i(m),v=t(748),g=i(v),y=t(749),h=i(y),b=t(756),_=i(b),w=t(757),j=i(w),F=t(758),k=i(F),E=t(759),q=i(E),M=t(760),V=i(M),P=t(761),O=i(P),x=t(762),N=i(x),I=t(763),L=i(I),D=t(766),C=i(D),R=t(767),T=i(R),z=t(768),A=i(z),S=t(769),B=i(S),H=t(770),U=i(H);exports.default={addrField:l.default,placeIdField:r.default,locationField:s.default,youtubeField:u.default,addrViewField:c.default,youtubeCreateField:p.default,youtubeEditField:g.default,photoEditField:h.default,photoEditViewer:_.default,photoViewer:j.default,multiPhotoViewer:q.default,base64Img:V.default,maTimeField:O.default,subcategoryDropdown:C.default,travelPhotoViewer:k.default,openTimeField:L.default,maHideField:N.default,maCustomEmbed:T.default,commentsList:A.default,exportExcelButton:B.default,watermarkEditor:U.default}},730:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(731),l=i(a);exports.default=function(){return{restrict:"E",scope:{value:"=",field:"=",entry:"="},template:"\n      <ma-input-field field=\"::field\" value=\"value\"></ma-input-field>\n      <ui-gmap-google-map\n        center='map.center'\n        zoom='map.zoom'\n        events='map.events'\n      >\n        <ui-gmap-marker\n          idKey='marker.id'\n          coords='marker.coords'\n          options='marker.options'\n          events='marker.events'\n        >\n        </ui-gmap-marker>\n      </ui-gmap-google-map>\n    ",link:function(e,t){var i={latitude:35.727659,longitude:139.733818};e.map={center:(0,l.default)({},i),zoom:16},e.marker={coords:(0,l.default)({},i),id:"center"};var a=function(t){e.map.center={latitude:t.lat,longitude:t.lng},e.marker.coords={latitude:t.lat,longitude:t.lng}},n=function(t){a(t),e.$apply(function(){e.entry.values.lat=t.lat,e.entry.values.lng=t.lng})},d=e.$watch("entry",function(e,t){var i=e.values.location;i&&i!==t.values.location&&a(i)},!0);e.$on("$destroy",function(){d()});var s=t.find("input");s.on("focus",function(){d()}),s.on("blur",function(e){var t=e.target.value;t&&(0,r.default)(t,n)}),e.entry.values["location.lat"]&&n({lat:e.entry.values["location.lat"],lng:e.entry.values["location.lng"]})}}};var n=t(738),r=i(n)},738:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var i={address:e,language:"zh_TW",region:"jp",key:"AIzaSyBoIeGEV4KX2WWGXbFe5UpqnJNKmBJ2KIw"};fetch("https://maps.googleapis.com/maps/api/geocode/json?"+(0,l.default)(i)).then(function(e){return e.json()}).then(function(e){if("OK"===e.status){var i=e.results[0].geometry.location;t(i)}else console.log(e)})},t(526);var a=t(739),l=i(a)},739:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){if(!(0,i.isObject)(e))return null===e?"":e.toString();var t=(0,i.map)(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}),a=t.join("&").replace(/%20/g,"+");return a};var i=t(380)},740:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"=",field:"=",entry:"="},template:'\n      <ma-input-field field="::field" value="value"></ma-input-field>\n    ',link:function(e,t){var i=function(t){var i=t.geometry.location;i&&e.$apply(function(){e.entry.values.address=t.vicinity;var a=i.lat(),l=i.lng();e.entry.values.location={lat:a,lng:l},e.entry.values.lat=a,e.entry.values.lng=l})};t.find("input").bind("blur",function(e){var t=e.target.value;t&&(0,l.default)(t,i)})}}};var a=t(741),l=i(a)},741:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var i=new window.google.maps.places.PlacesService(document.createElement("div"));i.getDetails({placeId:e},t)}},742:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"=",field:"=",entry:"="},template:"\n      <ma-input-field field=\"::field\" value=\"value\"></ma-input-field>\n      <ui-gmap-google-map\n        center='map.center'\n        zoom='map.zoom'\n        events='map.events'\n      >\n        <ui-gmap-marker\n          idKey='marker.id'\n          coords='marker.coords'\n          options='marker.options'\n          events='marker.events'\n        >\n        </ui-gmap-marker>\n      </ui-gmap-google-map>\n    ",link:function(e,t){var i={latitude:e.entry.values["location.lat"]||35.727659,longitude:e.entry.values["location.lng"]||139.733818};e.entry.values.lat=i.latitude,e.entry.values.lng=i.longitude,e.map={center:i,zoom:16,events:{dragend:function(t){e.entry.values.lat=t.center.lat(),e.entry.values.lng=t.center.lng()}}},e.marker={coords:i,id:"center",options:{draggable:!0},events:{dragend:function(t){e.entry.values.lat=t.position.lat(),e.entry.values.lng=t.position.lng()}}};var a=function(t){var i={latitude:t.lat,longitude:t.lng};e.$apply(function(){e.map.center=i,e.marker.coords=i,e.entry.values.lat=t.lat,e.entry.values.lng=t.lng})};t.find("input").bind("blur",function(e){var t=e.target.value;t&&(0,l.default)(t,a)}),e.value&&(0,l.default)(e.value,a)}}};var a=t(738),l=i(a)},743:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{videoId:"="},template:'<div class="embed-container">\n      <youtube-video video-id="videoId" />\n    </div>'}}},744:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"="},template:'<ma-string-field value="value"></ma-string-field>',link:function(e,t){var i=e.value;i&&(0,r.default)(i,function(){(0,l.default)(t,location)})}}};var a=t(745),l=i(a),n=t(738),r=i(n)},745:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lat:35.727659,lng:139.733818},i=n.default.element('<div style="width:100%; height: 300px;"/>');e.append(i);var a=new window.google.maps.Map(i[0],{center:t,zoom:16});new window.google.maps.Marker({position:t,map:a});return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var l=t(308),n=i(l)},746:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(732),l=i(a);exports.default=function(){"ngInject";return{restrict:"E",scope:{value:"=",field:"=",entry:"="},template:'\n      <ma-input-field field="::field" value="value"></ma-input-field>\n      <youtube-field ng-if="videoId" class="embed-container" video-id="videoId" />\n    ',link:function(e,t){t.find("input").bind("blur",function(t){var i=(0,r.default)(t.target.value);i&&((0,l.default)(e.entry.values,{video:i}),(0,l.default)(e,{videoId:i}),e.$apply())})}}};var n=t(747),r=i(n)},747:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/,i=e.match(t);return!(!i||11!==i[1].length)&&i[1]}},748:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(732),l=i(a);exports.default=function(){"ngInject";return{restrict:"E",scope:{value:"=",field:"=",entry:"="},template:'\n      <ma-input-field field="::field" value="value"></ma-input-field>\n      <youtube-field ng-if="value" class="embed-container" video-id="value" />\n    ',link:function(e,t){t.find("input").bind("blur",function(t){var i=(0,r.default)(t.target.value);i&&((0,l.default)(e,{value:i}),(0,l.default)(t.target,{value:i}))})}}};var n=t(747),r=i(n)},749:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return{restrict:"E",scope:{field:"&",entry:"=",value:"=",url:"@",linked:"@"},link:{pre:function(e){var t=e.field().uploadInformation();if(!t.hasOwnProperty("url"))throw new Error("You must provide a URL property to allow the upload of files.");e.multiple=!!t.hasOwnProperty("multiple")&&t.multiple,e.accept="*",t.hasOwnProperty("accept")&&(e.accept=t.accept),e.apifilename=!!t.hasOwnProperty("apifilename")&&t.apifilename;var i=e.value?e.value.split(","):[];e.files={};for(var a in i)e.files[i[a]]={name:i[a],progress:0}},post:function(t,i){var a=t.field();t.name=a.name(),t.v=a.validation(),t.value&&(t.v.required=!1);var l=i.find("input")[0],r=a.attributes();for(var s in r)l.setAttribute(s,r[s]);t.fileSelected=function(i){if(i&&i.length){var a;t.files={};for(var l in i)a=angular.copy(t.field().uploadInformation()),a.url=(0,d.default)(t.url),a.file=i[l],e.upload(a).progress(function(e){t.files[e.config.file.name]={name:e.config.file.name,progress:Math.min(100,parseInt(100*e.loaded/e.total))}}).success(function(e,i,a,l){if(t.files[l.file.name]={name:t.apifilename?e[t.apifilename]:l.file.name,progress:0},t.apifilename){var r=(0,n.default)(t.files).map(function(e){return t.files[e].name});t.value=r.join(",")}else t.value=(0,n.default)(t.files).join(",");t.entry.values[t.linked].push(e)}).error(function(e,i,a,l){delete t.files[l.file.name],t.value=(0,n.default)(t.files).join(",")})}},t.selectFile=function(){l.click()}}},template:'\n    <div class="row">\n      <div class="col-md-2">\n        <a class="btn btn-default" ng-click="selectFile()">\n          <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>\n          &nbsp;\n          <span>Add new photos</span>\n        </a>\n      </div>\n      <div class="col-md-10">\n        <div class="row" ng-repeat="file in files track by $index">\n          <div class="col-md-3" style="padding-top: 6px;">\n            <div class="progress" style="margin-bottom: 0;" ng-if="file.progress">\n              <div class="progress-bar" role="progressbar" aria-valuenow="{{ file.progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ file.progress }}%;">\n                <span class="sr-only" translate="N_COMPLETE" translate-values="{ progress: file.progress }"></span>\n              </div>\n            </div>\n          </div>\n          <div class="col-md-9" style="padding-top: 6px;"><small><em>{{ file.name }}<em><small></div>\n        </div>\n      </div>\n    </div>\n    <div class="row"><div class="col-xs-12"><hr /></div></div>\n    <input type="file" ngf-multiple="multiple" accept="{{ accept }}" ngf-select="fileSelected($files)"\n      id="{{ name }}" name="{{ name }}" ng-required="v.required" style="display:none" />\n    '}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(750),n=i(l);exports.default=a;var r=t(754),d=i(r);a.$inject=["Upload"]},754:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.split("{id}");return""+r.API_ROOT+t[0]+(0,n.default)()+t[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var l=t(755),n=i(l),r=t(524)},755:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=window.location.hash,t=e.replace(/\D/g,"");return t}},756:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"="},template:'\n    <div class="row">\n      <div class="col-sm-6 col-lg-4" ng-repeat="(key, photo) in value">\n        <a class="photo-edit" ng-href="#/restaurant_photos/delete/{{photo.id}}">\n          <img src="{{photo.path}}" />\n          <div class="overlay"></div>\n        </a>\n        <input class="form-control photo-name" ng-model="photo.name" />\n      </div>\n    </div>\n    '
}}},757:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"="},template:'\n    <div class="row">\n      <div class="col-xs-12">\n        <img style="max-width:100%;" src="{{value}}" />\n      </div>\n    </div>\n    '}}},758:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"="},template:'\n    <div class="row">\n      <div class="col-xs-12">\n        <span>{{value}}</span>\n        <img style="max-width:100%;" src="{{value}}" />\n      </div>\n    </div>\n    '}}},759:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"="},template:'\n    <div class="row">\n      <div class="col-sm-4" ng-repeat="(key, photo) in value">\n        <div class="photo-view">\n          <img style="width:100%;" src="{{photo.path}}" />\n        </div>\n        <p>{{photo.name}}</p>\n      </div>\n    </div>\n    '}}},760:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{value:"=",field:"=",entry:"=",name:"@"},template:'\n      <div class="row">\n        <div class="col-md-2">\n          <input class="btn btn-default" type="file" />\n        </div>\n      </div>',link:function(e,t){var i=!1,a=t.find("input"),n=t[0].getElementsByClassName("row")[0],r=new FileReader,d=e.name||"photo",s=e.entry.values[d],o=function(e){var t=l.default.element('\n          <div class="col-sm-12 img-preview-area">\n            <img class="img-preview" src="'+e+'" />\n          </div>\n        ');l.default.element(n).append(t)};!i&&s&&o(s),i=!0,r.addEventListener("load",function(){var t=n.getElementsByClassName("img-preview");t.length?t[0].src=r.result:o(r.result),e.$apply(function(){e.entry.values[d]=r.result})},!1),a.bind("change",function(){var e=a[0].files[0];e&&r.readAsDataURL(e)})}}};var a=t(308),l=i(a)},761:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){return{scope:{field:"&",value:"="},restrict:"E",link:function(e,t){var i=e.field();e.name=i.name(),e.rawValue=null==e.value?null:e.value instanceof Date?e.value:new Date((0,n.default)(e.value).tz("Asia/Tokyo").format("YYYY-MM-DD HH:mm:ss")),e.$watch("rawValue",function(t){t&&(e.value=t)}),e.v=i.validation();var a=t.find("input").eq(0),l=i.attributes();for(var r in l)a.attr(r,l[r])},template:'<input\n      type="text" ng-model="rawValue" id="{{ name }}" name="{{ name }}"\n      uib-timepicker ng-required="v.required"\n      minute-step="30" show-meridian="false" show-spinners="false"\n    />'}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var l=t(529),n=i(l)},762:function(e,exports){"use strict";function t(e,t){return{restrict:"E",scope:{field:"&",entry:"=",value:"=",entity:"&",form:"&",datastore:"&"},link:function(i,a){var l=i.field(),n=l.type();i.field=l,i.type=n,i.entity=i.entity(),i.form=i.form(),i.datastore=i.datastore(),i.getCssClasses=function(e){return"ng-admin-field-"+l.name().replace(".","_")+" ng-admin-type-"+n+" "+(l.getCssClasses(e)||"col-sm-10 col-md-8 col-lg-7")},i.getInput=function(){return i.form[l.name()]},i.fieldHasValidation=function(){var e=this.getInput();return e&&e.$dirty},i.fieldIsValid=function(){var e=this.getInput();return e&&e.$valid},i.getFieldValidationClass=function(){return this.fieldHasValidation()?this.fieldIsValid()?"has-success":"has-error":null};var r="",d="",s="";i.field.editable()&&(r='<div ng-class="getCssClasses(entry)">\n    '+(!l.templateIncludesLabel()&&l.getTemplateValue(i.entry)||e[n].getWriteWidget())+'\n    <span ng-show="fieldHasValidation()" class="glyphicon form-control-feedback" ng-class="fieldIsValid() ? \'glyphicon-ok\' : \'glyphicon-remove\'"></span>\n</div>',d='<label for="{{ field.name() }}" class="col-sm-2 control-label">\n        {{ field.label() | translate }}<span ng-if="field.validation().required">&nbsp;*</span>&nbsp;\n    </label>',s='<div id="row-{{ field.name() }}" class="form-field form-group inline-fields has-feedback" ng-class="getFieldValidationClass()">\n            '+d+"\n            "+r+"\n          </div>",a.append(s)),t(a.contents())(i)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.$inject=["FieldViewConfiguration","$compile"]},763:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){return{scope:{field:"&",value:"=",datastore:"&"},restrict:"E",link:{pre:function(e){var t=e.field(),i=t.targetEntity(),a=i.name(),l=t.targetFields(),r=t.sortField(),s="DESC"===t.sortDir()?-1:1,u=void 0;t.permanentFilters()?!function(){var e=t.permanentFilters(),i=(0,d.default)(e);u=function(t){return i.reduce(function(i,a){return i&&t.values[a]===e[a]},!0)}}():u=function(){return!0},e.fields=l,e.targetEntity=i,e.entries=o.default.createArrayFromRest(e.value||[],l,a,i.identifier().name()).sort(function(e,t){return e.values[r]>t.values[r]?s:e.values[r]<t.values[r]?-1*s:0}).filter(u),e.addNew=function(){return e.entries.push(o.default.createForFields(l))},e.duplicate=function(t){var i=o.default.createForFields(l);i.values=(0,n.default)({},t.values,{id:null}),e.entries.push(i)},e.remove=function(t){e.entries=e.entries.filter(function(e){return e!==t})},e.$watch("entries",function(t,i){t!==i&&(e.value=t.map(function(e){return e.transformToRest(l)}))},!0)}},template:'\n<div class="row"><div class="col-sm-12">\n    <ng-form ng-repeat="entry in entries track by $index" class="subentry" name="subform_{{$index}}" ng-init="formName = \'subform_\' + $index">\n        <div class="duplicate_button_container">\n            <a class="btn btn-default btn-sm" ng-click="duplicate(entry)"><span class="glyphicon glyphicon-duplicate" aria-hidden="true"></span>&nbsp;<span>Duplicate</span></a>\n        </div>\n        <div class="remove_button_container">\n            <a class="btn btn-default btn-sm" ng-click="remove(entry)"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>&nbsp;<span translate="REMOVE"></span></a>\n        </div>\n        <div class="form-field form-group time-input-group" ng-repeat="field in ::fields track by $index">\n            <ma-hide-field field="::field" value="entry.values[field.name()]" entry="entry" entity="::targetEntity" form="formName" datastore="::datastore()"></ma-hide-field>\n        </div>\n        <hr/>\n    </ng-form>\n    <div class="form-group">\n        <div class="col-sm-offset-2 col-sm-10">\n            <a class="btn btn-default btn-sm" ng-click="addNew()"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>&nbsp;<span translate="ADD_NEW" translate-values="{ name: field().name() }"></span></a>\n        </div>\n    </div>\n</div></div>'}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(731),n=i(l),r=t(750),d=i(r);exports.default=a;var s=t(764),o=i(s);a.$inject=[]},766:function(e,exports){"use strict";function t(){return{restrict:"E",scope:{field:"&",value:"=",entry:"=?",datastore:"&?"},template:'<ma-choices-field\n                field="field()"\n                datastore="datastore()"\n                refresh="refresh($search)"\n                value="value">\n            </ma-choices-field>',link:function(e){var t=!1,i=e.field(),a=i.targetEntity().identifier().name();e.name=i.name(),e.v=i.validation();var l=e.datastore().getEntries(i.targetEntity().uniqueId+"_choices");if(e.value&&e.value.length){var n=l.filter(function(t){return e.value.includes(t._identifierValue)});t||(e.entry.values.category=n[0].values.category,t=!0);var r=n.length>0;r||l.unshift(e.datastore().getEntries(i.targetEntity().uniqueId+"_values").find(function(t){return t.values[a]===e.value}))}var d=l.map(function(e){return{value:e._identifierValue,label:e.values[i.targetField().name()],category:e.values.category}});e.$broadcast("choices:update",{choices:d}),e.$watchCollection("entry.values.category",function(t,i){t&&e.$broadcast("choices:update",{choices:d.filter(function(e){return e.category===t})})})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t},767:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(){return{scope:{field:"&",value:"=",datastore:"&?"},restrict:"E",link:{pre:function(e){var t,i=e.field(),a=i.targetEntity(),l=a.name(),r=i.targetFields(),s=i.sortField(),o="DESC"===i.sortDir()?-1:1;i.permanentFilters()?!function(){var e=i.permanentFilters(),a=(0,n.default)(e);t=function(t){return a.reduce(function(i,a){return i&&t.values[a]===e[a]},!0)}}():t=function(){return!0},e.fields=r,e.targetEntity=a;var u=function(){e.entries=d.default.createArrayFromRest(e.value||[],r,l,a.identifier().name()).sort(function(e,t){return e.values[s]>t.values[s]?o:e.values[s]<t.values[s]?-1*o:0}).filter(t)};u(),e.remove=function(t){e.entries=e.entries.filter(function(e){return e!==t})},e.$watch("entries",function(t,i){t!==i&&(e.value=t.map(function(e){return e.transformToRest(r)}))},!0),e.$watch("value",function(e,t){e.length<=t.length||u()},!0)}},template:'\n<div class="row"><div class="col-sm-12">\n    <ng-form ng-repeat="entry in entries track by $index" class="subentry" name="subform_{{$index}}" ng-init="formName = \'subform_\' + $index">\n        <div class="remove_button_container">\n            <a class="btn btn-default btn-sm" ng-click="remove(entry)"><span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span>&nbsp;<span translate="REMOVE"></span></a>\n        </div>\n        <div class="form-field form-group" ng-repeat="field in ::fields track by $index">\n            <ma-field field="::field" value="entry.values[field.name()]" entry="entry" entity="::targetEntity" form="formName" datastore="::datastore()"></ma-field>\n        </div>\n        <hr/>\n    </ng-form>\n</div></div>'}}Object.defineProperty(exports,"__esModule",{value:!0});var l=t(750),n=i(l);exports.default=a;var r=t(764),d=i(r);a.$inject=[]},768:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(i,a){var l="DESC"===t?-1:1;return i.values[e]>a.values[e]?l:i.values[e]<a.values[e]?-1*l:0}}function l(e){var t=e();return{scope:{field:"&",value:"&",datastore:"&"},restrict:"E",link:{pre:function(e){var i,l=e.field(),n=l.targetEntity(),d=n.name(),o=l.targetFields(),u=l.sortField(),f=l.sortDir();l.permanentFilters()?!function(){var e=l.permanentFilters(),t=(0,r.default)(e);i=function(i){return t.reduce(function(t,a){return t&&i.values[a]===e[a]},!0)}}():i=function(){return!0};var c=s.default.createArrayFromRest(e.value()||[],o,d,n.identifier().name()).sort(a(u,f)).filter(i);d||!function(){var e=0;c=c.map(function(t){return t._identifierValue=e++,t})}(),e.field=l,e.targetFields=o,e.entries=c,e.entity=d?t.getEntity(d):n,e.sortField=u,e.sortDir=f,e.sort=function(t){var i="ASC",l=t.name();e.sortField===l&&(i="ASC"===e.sortDir?"DESC":"ASC"),e.entries=e.entries.sort(a(l,i)),e.sortField=l,e.sortDir=i}}},template:'\n<ma-datagrid ng-if="::entries.length > 0"\n    entries="entries"\n    fields="::targetFields"\n    list-actions="::field.listActions()"\n    entity="::entity"\n    datastore="::datastore()"\n    sort-field="sortField"\n    sort-dir="sortDir"\n    sort="::sort">\n</ma-datagrid>'}}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(750),r=i(n);exports.default=l;var d=t(764),s=i(d);l.$inject=["NgAdminConfiguration"]},769:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){return{restrict:"E",scope:{entity:"="},template:'<a class="btn btn-default" ng-click="exportToExcel()">\n        <span class="glyphicon glyphicon-download" aria-hidden="true"></span>&nbsp;<span class="hidden-xs ng-scope">Export All</span>\n    </a>',link:function(e){var t=e.entity;e.exportToExcel=function(){window.open("//f.feed-me.me/export/"+t._name+".csv")}}}}},770:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(771),l=i(a),n=t(732),r=i(n);exports.default=function(){return{restrict:"E",scope:{field:"=",entry:"="},link:function(e,t){var i=document.createElement("div"),a=document.createElement("canvas");t.append(i),i.appendChild(a);var n=(0,u.default)(c,{size:e.entry.values.size,x:e.entry.values.x,y:e.entry.values.y,position:e.entry.values.position});(0,r.default)(e.entry.values,n);var d=new s.default.Canvas(a),o=function(e,t){var i=a.width/2,n=a.height/2,r=(0,l.default)(e-i),d=(0,l.default)(t-n);return d>0?r>0?"bottom-right":"bottom-left":r>0?"top-right":"top-left"},m=function(e){if(e){var t=a.width,i=f(t),l=n.position,r=n.size,d=n.x,o=n.y;e.scaleToWidth(t*(r/100));var u=function(){var a=t*(d/100)+e.width*e.scaleX/2,n=i*(o/100)+e.height*e.scaleX/2,r=t-a,s=i-n;switch(l){case"top-right":return[r,n];case"bottom-left":return[a,s];case"bottom-right":return[r,s];case"top-left":default:return[a,n]}}();e.setPositionByOrigin(new s.default.Point(u[0],u[1]))}},p=function(e){var t=d.getObjects();t.length&&t.forEach(function(e){return d.remove(e)}),s.default.Image.fromURL(e,function(e){m(e),e.lockRotation=!0,e.set({borderColor:"#FF5252",cornerColor:"#FF5252",cornerSize:6}),d.add(e),d.setActiveObject(e)})},v=function(){var e=i.getBoundingClientRect(),t=e.width,l=f(t);a.height=l,a.width=t,d.setHeight(l),d.setWidth(t),m(d.getObjects()[0])},g=e.$watch("entry",function(e,t){var i=e.values.image;i&&i!==t.values.image&&p(i)},!0);d.on("object:modified",function(t){var i=t.target,l=i.width,n=i.height,r=i.scaleX,d=i.left,s=i.top,u={width:l*r,height:n*r},f=o(d,s),c=function(){var e=a.width-d-u.width,t=a.height-s-u.height;switch(f){case"top-right":return[e,s];case"bottom-left":return[d,t];case"bottom-right":return[e,t];case"top-left":default:return[d,s]}}();e.$apply(function(){e.entry.values.size=l*r/a.width*100,e.entry.values.x=c[0]/a.width*100,e.entry.values.y=c[1]/a.height*100,e.entry.values.position=f})}),window.addEventListener("resize",v),window.setTimeout(function(){v(),d.setBackgroundColor("#999");var t=e.entry.values.image;t&&p(t)}),e.$on("$destroy",function(){window.removeEventListener("resize",v),g()})}}};var d=t(775),s=i(d),o=t(819),u=i(o),f=function(e){return.75*e},c={size:20,x:5,y:5,position:"bottom-right"}},780:function(e,exports){},781:function(e,exports){},804:function(e,exports){},816:function(e,exports,t){function i(e){return t(a(e))}function a(e){return l[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var l={"./fabric":817,"./fabric.js":817,"./fabric.require":775,"./fabric.require.js":775};i.keys=function(){return Object.keys(l)},i.resolve=a,e.exports=i,i.id=816},818:function(e,exports){},914:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e.dashboard().addCollection(e.collection(e.entity("restaurants")).title("餐廳排行").perPage(10).fields([e.field("name").isDetailLink(!0).detailLinkRoute("show"),e.field("pageview","number")]).sortField("pageview").sortDir("DESC").order(1)).addCollection(e.collection(e.entity("travels")).title("推薦行程排行").perPage(5).fields([e.field("name").isDetailLink(!0).detailLinkRoute("show"),e.field("pageview","number")]).sortField("pageview").sortDir("DESC").order(1))}},915:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(916),l=i(a),n=t(917),r=i(n);exports.default={response:l.default,request:r.default}},916:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(731),l=i(a);exports.default=function(e,t,i,a,d){var s=e.data;if("themes"===i&&"getList"===t)return s.all;var o=d.config.params,u=o.sort,f=o.sortDir;if(u&&"district.name"!==u&&(s=(0,n.sortBy)(s,function(e){return(0,n.get)(e,u)}),"DESC"===f&&(s=s.reverse())),"get"===t)switch(i){case"cities":return(0,l.default)({},s,{regions:s.regions.map(r)});case"regions":return(0,l.default)({},s,{districts:s.districts.map(r),city_id:s.city.id});case"districts":return(0,l.default)({},s,{region_id:s.region.id,restaurant_ids:s.restaurants.map(r)});case"users":return(0,l.default)({},s,{roles:s.roles.map(r)});case"roles":return(0,l.default)({},s,{permissions:s.permissions.map(r)});case"categories":return(0,l.default)({},s,{subcategories:s.subcategories.map(r)});case"subcategories":return(0,l.default)({},s,{category_id:s.category});case"restaurants":return(0,l.default)({},s,{place_id:s.placeId,subcategories:s.subcategories.map(r),atmospheres:s.atmospheres.map(r),demands:s.demands.map(r),populations:s.populations.map(r),themes:s.themes.map(r),comments:s.comments.map(r)});case"themes":return(0,l.default)({},s,{restaurant_ids:s.restaurants.map(r)});default:return s}if("getList"===t){if("choices"===i)return s.map(function(e){return(0,l.default)({},e,{restaurantId:e.id})});if("recommends"===i)return s.map(function(e){return(0,l.default)({},e,{themeId:e.id})});if("users"===i)return s.map(function(e){return(0,l.default)({},e,{roles:e.roles.map(r)})})}return s};var n=t(380),r=function(e){return e.id}},917:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(918),l=i(a),n=t(731),r=i(n),d=t(732),s=i(d);exports.default=function(e,t,i,a,n,d){switch("getList"===t&&(0,c.default)(d),(0,s.default)(d,{noTrack:!0}),i){case"restaurants":switch(t){case"getList":return(0,s.default)(d,{include:["district","region"].join(","),all:!0}),{params:d};case"get":return(0,s.default)(d,{include:["district","photos","envPhotos","subcategories","atmospheres","hours","populations","demands","themes","region","comments"].join(","),all:!0}),{params:d};case"post":return e.hours&&(0,s.default)(e,{hours:e.hours.map(function(e){return(0,r.default)({},e,{start:m(e.start),end:m(e.end)})})}),(0,s.default)(e,{scores:(0,l.default)(e.scores)}),{element:e};case"put":return e.hours&&(0,s.default)(e,{hours:e.hours.map(function(e){return(0,r.default)({},e,{start:m(e.start),end:m(e.end)})})}),e.lat||(0,s.default)(e,(0,r.default)({},e.location)),(0,s.default)(e,{district_id:e.district.id,atmosphere_ids:e.atmospheres,demand_ids:e.demands,population_ids:e.populations,subcategory_ids:e.subcategories,scores:(0,l.default)(e.scores)}),{element:e}}break;case"comments":if("getList"===t){if("filters"in d&&"restaurant_id"in d.filters){var o=d.filters.restaurant_id;(0,s.default)(d,{restaurant_id:o})}return(0,s.default)(d,{include:"user"}),{params:d}}break;case"cities":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"regions"}),{params:d}}break;case"districts":switch(t){case"getList":return(0,s.default)(d,{include:"region"}),{params:d};case"get":return(0,s.default)(d,{include:"region,restaurants"}),{params:d};case"put":return(0,s.default)(e,{region_id:e.region.id}),{element:e}}break;case"regions":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"districts,city"}),{params:d}}break;case"users":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"roles"}),{params:d}}break;case"roles":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"permissions"}),{params:d}}break;case"categories":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"subcategories"}),{params:d}}break;case"themes":switch(t){case"getList":case"get":return(0,s.default)(d,{include:"restaurants"}),{params:d}}break;case"travels":switch(t){case"get":return(0,s.default)(d,{include:"photos,district"}),{params:d};case"getList":return(0,s.default)(d,{include:"district"}),{params:d};case"put":return(0,s.default)(e,{district_id:e.district.id}),{element:e}}break;case"choices":switch(t){case"put":return(0,s.default)(e,{restaurant_id:e.restaurant.id}),{element:e}}break;case"abouts":switch(t){case"get":return(0,s.default)(d,{include:"about_contents"}),{params:d}}}return{}};var o=t(529),u=i(o),f=t(920),c=i(f),m=function(e){var t=(0,u.default)(e).set({year:1970,month:0,dates:1}),i=t.format().split("+");return[i[0],"09:00"].join("+")}},920:function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){e._page&&(e.page=e._page,e.perPage=e._perPage),delete e._page,delete e._perPage,e._sortField&&(e.sort=e._sortField,e.sortDir=e._sortDir,delete e._sortField,delete e._sortDir),e._filters&&(e.filters=e._filters,delete e._filters)}},921:function(e,exports,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchControllerTemplate=exports.searchController=void 0;var a=t(922),l=i(a),n=t(923),r=i(n),d=t(884),s=i(d),o=t(524);exports.searchController=function(){function e(t){"ngInject";(0,l.default)(this,e),this.Restangular=t}return e.$inject=["Restangular"],(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.loading=!0,this.matched=[],this.Restangular.allUrl("restaurants",o.API_ROOT+"restaurants").getList().then(function(t){e.loading=!1,(0,s.default)(t)?e.restaurants=t:e.restaurants=t.data})}},{key:"onSearch",value:function(){var e=this;if(this.restaurants&&this.restaurants.length){if(!this.search)return void(this.matched=[]);var t=parseInt(this.search,10);t?this.matched=this.restaurants.filter(function(e){return t===e.id}):this.matched=this.restaurants.filter(function(t){return t.name.includes(e.search)})}}}]),e}(),exports.searchControllerTemplate='\n  <div class="row">\n    <div class="col-xs-12">\n      <div class="page-header">\n        <h1>Search</h1>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12 col-sm-6">\n      <input\n        type="text"\n        ng-disabled="controller.loading"\n        ng-model="controller.search"\n        ng-change="controller.onSearch()"\n        class="form-control"\n        placeholder="{{controller.loading ? \'Loading...\' : \'輸入餐廳ID或名稱\'}}"\n      />\n    </div>\n    <div class="col-xs-12">\n      <table class="grid table table-condensed table-hover table-striped">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Name</th>\n            <th>Address</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="restaurant in controller.matched">\n            <td><a href="/#/restaurants/show/{{restaurant.id}}">{{restaurant.id}}</a></td>\n            <td><a href="/#/restaurants/show/{{restaurant.id}}">{{restaurant.name}}</a></td>\n            <td>{{restaurant.address}}</td>\n          </tr>\n        </tbody>\n    </div>\n  </div>\n'}});